import{p as e,a as t,r as l,b as n,w as r,o as a,c as s,d as o,e as d,f as u,v as i,u as c,g,t as p,h as b,i as h,j as w}from"./vendor.ca89593d.js";e("data-v-0ed5a626");const m={class:"lg:w-1/2 md:w-2/3 sm:w-11/12 mx-auto z-10"},y={class:"pt-5 mb-5 dark:text-white"},v=d("b",null,"Paste transcript here:",-1),k=b(),x=d("br",null,null,-1),f=b(),C={class:"dark:text-white my-4"},E=d("b",null,"Help Menu",-1),L=d("br",null,null,-1),I=b(" Left Alt = back 4s"),B=d("br",null,null,-1),A=b(" Space = play/pause"),M=d("br",null,null,-1),F=b(" Down = show the current word answer"),H=d("br",null,null,-1),S=b(" Tab = Next word"),T=d("br",null,null,-1),$=b(" Shift Tab / Backspace = Back word"),D=d("br",null,null,-1),P=b(" F1/F2 = Decrease/Increase audio speed by 0.1"),W=d("br",null,null,-1),U=b(" F3 = Check Answer"),j=d("br",null,null,-1),R=b(" F4 = Toggle hint (show/hide the word length)"),O=d("br",null,null,-1),_={class:"dark:text-white text-sm my-2"},q={class:"my-5 break-normal dark:text-white"},z=d("br",null,null,-1);t();const K={expose:[],setup(e){const t=h(),b=t.appContext.config.globalProperties.document,w=t.appContext.config.globalProperties.window,K=l(null),N=n({ratio:1,nWords:-1,hint:!1,useMaxLength:!0,showHelp:!1,showAnswer:!1}),V=n({src:"",speed:1});r((()=>V.speed),(e=>{K.value.playbackRate=e})),a((()=>{b.addEventListener("keydown",(e=>{"F1"==e.key?(e.preventDefault(),V.speed-=.1):"F2"==e.key?(e.preventDefault(),V.speed+=.1):"F3"==e.key?(e.preventDefault(),te()):"F4"==e.key&&(e.preventDefault(),Z())}))}));const G=e=>{let t=e.target.files[0];const l=URL.createObjectURL(t);V.src=l},J=()=>{b.getElementById("audio-input").click()},Q=n({words:{}}),X=e=>Math.random()<N.ratio?`[${e}]`:e,Y=()=>{"dark"===localStorage.theme||!("theme"in localStorage)&&w.matchMedia("(prefers-color-scheme: dark)").matches?(b.documentElement.classList.add("dark"),localStorage.theme="light"):(b.documentElement.classList.remove("dark"),localStorage.theme="dark")},Z=()=>{N.hint=!N.hint;let e=b.querySelectorAll(".hint");for(let t=0;t<e.length;t++){let l=e[t];N.hint?l.style.display="block":l.style.display="none"}},ee=e=>Math.random()<N.ratio&&"br"!=e?(N.nWords++,Q.words[`@${N.nWords}`]=e,`\n        <div class="inline-block dark:text-white font-mono">\n            <div class="border-b-2 mr-1 inline-block border-blue-500 text-lg">\n                <input\n                    ref="ref-${N.nWords}"\n                    id="@${N.nWords}"\n                    class="outline-none dark:bg-gray-900 bg-gray-200 text-center mt-2"\n                    style="width: ${10*(e.length+1)}px;"\n                    ${N.useMaxLength?`maxlength="${e.length}"`:""}\n                />\n            </div>\n            <div class="hint text-center text-xs" style="display: none">(${e.length})</div>\n        </div>`):e,te=()=>{N.showAnswer=!N.showAnswer;for(let e in Q.words){let t=b.getElementById(e),l=t.value;""!=l&&(l!=Q.words[e]?t.style.color="red":""==t.style.color&&(t.style.color="limegreen"))}},le=n({text:""}),ne=n({text:""}),re=()=>{if(le.text=le.text.trim(),""==le.text)return;N.nWords=-1,Q.words={};let e=le.text.trim().replace(/(\.|;|:|,|”)(?!\s|”)/g,"$& "),t=e.replace(/(\r\n|\n|\r)/gm," <br/>").replace(/\b\w+(?:[\'-’]\w+)*\b/g,ee),l=e.replace(/\b\w+(?:[\'-’]\w+)*\b/g,X);console.log(l),ne.text=t,setTimeout((()=>{for(let e in Q.words){let t="@"+Math.min(parseInt(e.substring(1))+1,Object.keys(Q.words).length-1),l="@"+Math.max(parseInt(e.substring(1))-1,0);b.getElementById(e).addEventListener("input",(t=>{if(!t.data)return;let l=t.target.value,n=t.target.selectionStart-1,r=Q.words[e].substring(n,n+1);r==r.toUpperCase()&&(t.target.value=l.substring(0,l.length-1)+t.data.toUpperCase()),t.target.value=t.target.value.trim()})),b.getElementById(e).addEventListener("keydown",(e=>{if("Backspace"==e.code)switch(e.target.value.length){case 0:b.getElementById(l).focus();break;case 1:e.target.style.color=""}})),b.getElementById(e).addEventListener("keyup",(l=>{l.preventDefault(),l.code.match(/^Key/)?l.target.value.length==Q.words[e].length&&b.getElementById(t).focus():" "==l.key&&""!=V.src?K.value.paused?K.value.play():K.value.pause():"ArrowDown"==l.code?(l.target.value=Q.words[e],l.target.style.color="darkgoldenrod"):"AltLeft"==l.code&&(K.value.currentTime-=4)}))}b.getElementById("@0").focus(),K.value.canPlay&&K.value.play()}),200)};return(e,t)=>(s(),o("div",null,[d("div",m,[d("div",y,[v,k,x,f,u(d("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>c(le).text=e),class:"dark:bg-black inline-block outline-back dark:outline-white mt-3 w-full h-5"},null,512),[[i,c(le).text]])]),d("button",{onClick:J,class:"bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded mr-2 mb-1"},"Add audio"),d("button",{onClick:Y,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Change theme"),d("button",{onClick:Z,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Toggle Hint"),d("button",{onClick:t[2]||(t[2]=e=>c(N).showHelp=!c(N).showHelp),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded"},"Toggle Help"),u(d("div",C,[E,L,I,B,A,M,F,H,S,T,$,D,P,W,U,j,R,O],512),[[g,c(N).showHelp]]),d("audio",{ref:K,src:c(V).src,controls:"",class:"inline w-full dark:bg-blue-200"},null,8,["src"]),d("div",_," Current speed: "+p(c(V).speed.toFixed(1))+"x ",1),d("button",{onClick:re,class:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2"},"Start!"),d("button",{onClick:te,class:"bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded mr-2"},"Check Answer"),d("input",{type:"file",id:"audio-input",class:"hidden",accept:"audio/*",onChange:G},null,32),d("div",q,[d("div",{innerHTML:c(ne).text,class:"break-normal"},null,8,["innerHTML"])]),z])]))},__scopeId:"data-v-0ed5a626"};const N=w({expose:[],setup:e=>(e,t)=>(s(),o(K))});N.config.globalProperties.window=window,N.config.globalProperties.document=document,N.mount("#app");
