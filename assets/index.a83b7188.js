import{p as e,a as t,r as l,b as n,w as a,o as r,c as s,d as o,e as d,f as i,v as c,u,g,t as p,h as b,i as h,j as m}from"./vendor.ca89593d.js";e("data-v-04f928cc");const w={class:"lg:w-1/2 md:w-2/3 sm:w-11/12 mx-auto z-10"},x={class:"pt-5 mb-5 dark:text-white"},v=d("b",null,"Paste transcript here:",-1),y=b(),k=d("br",null,null,-1),f=b(),C={class:"dark:text-white my-4"},E=b(" Left Alt = back 3s"),L=d("br",null,null,-1),I=b(" Space = play/pause"),B=d("br",null,null,-1),M=b(" Down = show the current word answer"),S=d("br",null,null,-1),$=b(" Tab/ShiftTab = Next/Back word"),H=d("br",null,null,-1),T=b(" F1/F2 = Decrease/Increase audio speed by 0.1 "),A={class:"dark:text-white text-sm my-2"},P={class:"my-5 break-normal dark:text-white"},W=d("br",null,null,-1);t();const D={expose:[],setup(e){const t=h(),b=t.appContext.config.globalProperties.document,m=t.appContext.config.globalProperties.window,D=l(null),F=n({ratio:1,nWords:-1,hint:!1,useMaxLength:!0,showHelp:!0}),U=n({src:"",speed:1});a((()=>U.speed),(e=>{D.value.playbackRate=e})),r((()=>{b.addEventListener("keydown",(e=>{"F1"==e.key?U.speed-=.1:"F2"==e.key&&(U.speed+=.1)}))}));const j=e=>{let t=e.target.files[0];const l=URL.createObjectURL(t);U.src=l},R=()=>{b.getElementById("audio-input").click()},O=n({words:{}}),_=e=>Math.random()<F.ratio?`[${e}]`:e,q=()=>{"dark"===localStorage.theme||!("theme"in localStorage)&&m.matchMedia("(prefers-color-scheme: dark)").matches?(b.documentElement.classList.add("dark"),localStorage.theme="light"):(b.documentElement.classList.remove("dark"),localStorage.theme="dark")},z=()=>{F.hint=!F.hint;let e=b.querySelectorAll(".hint");for(let t=0;t<e.length;t++){let l=e[t];F.hint?l.style.display="block":l.style.display="none"}},K=e=>Math.random()<F.ratio&&"br"!=e?(F.nWords++,O.words[`@${F.nWords}`]=e,`\n        <div class="inline-block dark:text-white font-mono">\n            <div class="border-b-2 mr-1 inline-block border-blue-500 text-lg">\n                <input\n                    ref="ref-${F.nWords}"\n                    id="@${F.nWords}"\n                    class="outline-none dark:bg-gray-900 bg-gray-200 text-center mt-2"\n                    style="width: ${10*(e.length+1)}px;"\n                    ${F.useMaxLength?`maxlength="${e.length}"`:""}\n                />\n            </div>\n            <div class="hint text-center text-xs" style="display: none">(${e.length})</div>\n        </div>`):e,N=()=>{for(let e in O.words){let t=b.getElementById(e),l=t.value;""!=l&&(l!=O.words[e]?t.style.color="red":""==t.style.color&&(t.style.color="limegreen"))}},V=n({text:""}),G=n({text:""}),J=()=>{if(V.text=V.text.trim(),""==V.text)return;F.nWords=-1,O.words={};let e=V.text.trim().replace(/(\.|;|:|,|”)(?!\s|”)/g,"$& "),t=e.replace(/(\r\n|\n|\r)/gm," <br/>").replace(/\b\w+(?:[\'-’]\w+)*\b/g,K),l=e.replace(/\b\w+(?:[\'-’]\w+)*\b/g,_);console.log(l),G.text=t,setTimeout((()=>{for(let e in O.words){let t="@"+Math.min(parseInt(e.substring(1))+1,Object.keys(O.words).length-1),l="@"+Math.max(parseInt(e.substring(1))-1,0);b.getElementById(e).addEventListener("input",(l=>{if(!l.data)return;let n=l.target.value,a=l.target.selectionStart-1,r=O.words[e].substring(a,a+1);r==r.toUpperCase()&&(l.target.value=n.substring(0,n.length-1)+l.data.toUpperCase()),l.target.value=l.target.value.trim(),l.target.value.length==O.words[e].length&&b.getElementById(t).focus()})),b.getElementById(e).addEventListener("keydown",(e=>{"Backspace"==e.code&&""==e.target.value&&(e.preventDefault(),b.getElementById(l).focus())})),b.getElementById(e).addEventListener("keyup",(t=>{t.preventDefault(),console.log(t.target.value),t.code.match(/^Key/)||(" "==t.key&&""!=U.src?D.value.paused?D.value.play():D.value.pause():"ArrowDown"==t.code?(t.target.value=O.words[e],t.target.style.color="darkgoldenrod"):"AltLeft"==t.code&&(D.value.currentTime-=3))}))}b.getElementById("@0").focus(),D.value.canPlay&&D.value.play()}),200)};return(e,t)=>(s(),o("div",null,[d("div",w,[d("div",x,[v,y,k,f,i(d("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>u(V).text=e),class:"dark:bg-black inline-block outline-back dark:outline-white mt-3 w-full h-5"},null,512),[[c,u(V).text]])]),d("button",{onClick:R,class:"bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded mr-2 mb-1"},"Add audio"),d("button",{onClick:q,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Change theme"),d("button",{onClick:z,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Toggle Hint"),d("button",{onClick:t[2]||(t[2]=e=>u(F).showHelp=!u(F).showHelp),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded"},"Toggle Help"),i(d("div",C,[E,L,I,B,M,S,$,H,T],512),[[g,u(F).showHelp]]),d("audio",{ref:D,src:u(U).src,controls:"",class:"inline w-full dark:bg-blue-200"},null,8,["src"]),d("div",A," Current speed: "+p(u(U).speed.toFixed(1))+"x ",1),d("button",{onClick:J,class:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2"},"Start!"),d("button",{onClick:N,class:"bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded mr-2"},"Check Answer"),d("input",{type:"file",id:"audio-input",class:"hidden",accept:"audio/*",onChange:j},null,32),d("div",P,[d("div",{innerHTML:u(G).text,class:"break-normal"},null,8,["innerHTML"])]),W])]))},__scopeId:"data-v-04f928cc"};const F=m({expose:[],setup:e=>(e,t)=>(s(),o(D))});F.config.globalProperties.window=window,F.config.globalProperties.document=document,F.mount("#app");
