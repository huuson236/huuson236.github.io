import{p as e,a as t,r as l,b as r,o as a,c as n,d as o,w as s,v as d,u as i,e as u,f as c,g,h as b}from"./vendor.bff08997.js";e("data-v-9508b3ea");const p={class:"lg:w-1/2 md:w-2/3 sm:w-11/12 mx-auto z-10"},m={class:"pt-5 mb-5 dark:text-white"},h=o("b",null,"Paste transcript here:",-1),w=c(),v=o("br",null,null,-1),x=c(),k={class:"dark:text-white mt-5"},y=c(" Left Alt = back 3s"),f=o("br",null,null,-1),C=c(" Space = play / pause"),L=o("br",null,null,-1),E=c(" Down = show the current word answer "),$={class:"my-5 break-normal dark:text-white"},I=o("br",null,null,-1);t();const M={expose:[],setup(e){const t=g(),c=t.appContext.config.globalProperties.document,b=t.appContext.config.globalProperties.window,M=l(null),H=r({ratio:1,nWords:-1,hint:!1,useMaxLength:!0,showHelp:!0}),S=r({src:""}),B=e=>{let t=e.target.files[0];const l=URL.createObjectURL(t);S.src=l},T=()=>{c.getElementById("audio-input").click()},W=r({words:{}}),A=e=>Math.random()<H.ratio?`[${e}]`:e,P=()=>{"dark"===localStorage.theme||!("theme"in localStorage)&&b.matchMedia("(prefers-color-scheme: dark)").matches?(c.documentElement.classList.add("dark"),localStorage.theme="light"):(c.documentElement.classList.remove("dark"),localStorage.theme="dark")},U=e=>Math.random()<H.ratio&&"br"!=e?(H.nWords++,W.words[`@${H.nWords}`]=e,`\n        <div class="inline-block">\n            <div class="border-b-2 mr-1 inline-block border-blue-400">\n                <input\n                    ref="ref-${H.nWords}"\n                    id="@${H.nWords}"\n                    class="font-mono outline-none dark:bg-gray-900 dark:text-white bg-gray-200"\n                    style="width: ${8*(e.length+1)}px;"\n                    ${H.useMaxLength?`maxlength="${e.length}"`:""}\n                />\n            </div>\n            <div class="mono"> ${H.hint?`(${e.length})`:""} </div>\n        </div>`):e,j=()=>{for(let e in W.words){let t=c.getElementById(e),l=t.value;""!=l&&(l!=W.words[e]?t.style.color="red":""==t.style.color&&(t.style.color="limegreen"))}},D=r({text:""}),O=r({text:""}),R=()=>{if(D.text=D.text.trim(),""==D.text)return;H.nWords=-1,W.words={};let e=D.text.trim().replace(/(\.|;|:|,|”)(?!\s|”)/g,"$& "),t=e.replace(/(\r\n|\n|\r)/gm," <br/>").replace(/\b\w+(?:[\'-’]\w+)*\b/g,U),l=e.replace(/\b\w+(?:[\'-’]\w+)*\b/g,A);console.log(l),O.text=t,setTimeout((()=>{for(let e in W.words){let t="@"+Math.min(parseInt(e.substring(1))+1,Object.keys(W.words).length-1);Math.max(parseInt(e.substring(1))-1,0),c.getElementById(e).addEventListener("input",(l=>{if(!l.data)return;let r=l.target.value,a=l.target.selectionStart-1,n=W.words[e].substring(a,a+1);n==n.toUpperCase()&&(l.target.value=r.substring(0,r.length-1)+l.data.toUpperCase()),l.target.value=l.target.value.trim(),l.target.value.length==W.words[e].length&&c.getElementById(t).focus()})),c.getElementById(e).addEventListener("keyup",(t=>{t.preventDefault(),t.code.match(/^Key/)||(" "==t.key&&""!=S.src?M.value.paused?M.value.play():M.value.pause():"ArrowDown"==t.code?(t.target.value=W.words[e],t.target.style.color="darkgoldenrod"):"AltLeft"==t.code&&(console.log(M.value.currentTime),M.value.currentTime-=3))}))}c.getElementById("@0").focus(),M.value.play()}),200)};return(e,t)=>(a(),n("div",null,[o("div",p,[o("div",m,[h,w,v,x,s(o("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(D).text=e),class:"dark:bg-black inline-block outline-back dark:outline-white mt-3 w-full h-5"},null,512),[[d,i(D).text]])]),o("button",{onClick:T,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Add audio"),o("button",{onClick:j,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Check Answer"),o("button",{onClick:P,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Change theme"),o("button",{onClick:t[2]||(t[2]=e=>i(H).showHelp=!i(H).showHelp),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded"},"Toggle Help"),s(o("div",k,[y,f,C,L,E],512),[[u,i(H).showHelp]]),o("audio",{ref:M,src:i(S).src,controls:"",class:"inline my-5 w-full dark:bg-blue-200"},null,8,["src"]),o("button",{onClick:R,class:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2"},"Start!"),o("input",{type:"file",id:"audio-input",class:"hidden",accept:"audio/*",onChange:B},null,32),o("div",$,[o("div",{innerHTML:i(O).text,class:"break-normal"},null,8,["innerHTML"])]),I])]))},__scopeId:"data-v-9508b3ea"};const H=b({expose:[],setup:e=>(e,t)=>(a(),n(M))});H.config.globalProperties.window=window,H.config.globalProperties.document=document,H.mount("#app");
