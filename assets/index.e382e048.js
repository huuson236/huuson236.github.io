import{p as e,a as t,r as l,b as n,o as r,c as a,d as o,w as s,v as d,u as i,e as u,f as c,g,h as b}from"./vendor.bff08997.js";e("data-v-a9e08412");const p={class:"lg:w-1/2 md:w-2/3 sm:w-11/12 mx-auto z-10"},h={class:"pt-5 mb-5 dark:text-white"},m=o("b",null,"Paste transcript here:",-1),w=c(),v=o("br",null,null,-1),x=c(),y={class:"dark:text-white mt-5"},k=c(" Left Alt = back 3s"),f=o("br",null,null,-1),C=c(" Space = play/pause"),L=o("br",null,null,-1),E=c(" Down = show the current word answer"),I=o("br",null,null,-1),M=c(" Tab/ShiftTab = Next/Back word "),S={class:"my-5 break-normal dark:text-white"},T=o("br",null,null,-1);t();const $={expose:[],setup(e){const t=g(),c=t.appContext.config.globalProperties.document,b=t.appContext.config.globalProperties.window,$=l(null),H=n({ratio:1,nWords:-1,hint:!1,useMaxLength:!0,showHelp:!0}),B=n({src:""}),A=e=>{let t=e.target.files[0];const l=URL.createObjectURL(t);B.src=l},W=()=>{c.getElementById("audio-input").click()},P=n({words:{}}),U=e=>Math.random()<H.ratio?`[${e}]`:e,j=()=>{"dark"===localStorage.theme||!("theme"in localStorage)&&b.matchMedia("(prefers-color-scheme: dark)").matches?(c.documentElement.classList.add("dark"),localStorage.theme="light"):(c.documentElement.classList.remove("dark"),localStorage.theme="dark")},D=()=>{H.hint=!H.hint;let e=c.querySelectorAll(".hint");for(let t=0;t<e.length;t++){let l=e[t];H.hint?l.style.display="block":l.style.display="none"}},O=e=>Math.random()<H.ratio?(H.nWords++,P.words[`@${H.nWords}`]=e,`\n        <div class="inline-block dark:text-white ">\n            <div class="border-b-2 mr-1 inline-block border-blue-400">\n                <input\n                    ref="ref-${H.nWords}"\n                    id="@${H.nWords}"\n                    class="font-mono outline-none dark:bg-gray-900 bg-gray-200"\n                    style="width: ${8*(e.length+1)}px;"\n                    ${H.useMaxLength?`maxlength="${e.length}"`:""}\n                />\n            </div>\n            <div class="mono hint text-center" style="display: none">(${e.length})</div>\n        </div>`):e,R=()=>{for(let e in P.words){let t=c.getElementById(e),l=t.value;""!=l&&(l!=P.words[e]?t.style.color="red":""==t.style.color&&(t.style.color="limegreen"))}},_=n({text:""}),q=n({text:""}),z=()=>{if(_.text=_.text.trim(),""==_.text)return;H.nWords=-1,P.words={};let e=_.text.trim().replace(/(\.|;|:|,|”)(?!\s|”)/g,"$& "),t=e.replace(/(\r\n|\n|\r)/gm," <br/>").replace(/\b\w+(?:[\'-’]\w+)*\b/g,O),l=e.replace(/\b\w+(?:[\'-’]\w+)*\b/g,U);console.log(l),q.text=t,setTimeout((()=>{for(let e in P.words){let t="@"+Math.min(parseInt(e.substring(1))+1,Object.keys(P.words).length-1);Math.max(parseInt(e.substring(1))-1,0),c.getElementById(e).addEventListener("input",(l=>{if(!l.data)return;let n=l.target.value,r=l.target.selectionStart-1,a=P.words[e].substring(r,r+1);a==a.toUpperCase()&&(l.target.value=n.substring(0,n.length-1)+l.data.toUpperCase()),l.target.value=l.target.value.trim(),l.target.value.length==P.words[e].length&&c.getElementById(t).focus()})),c.getElementById(e).addEventListener("keyup",(t=>{t.preventDefault(),t.code.match(/^Key/)||(" "==t.key&&""!=B.src?$.value.paused?$.value.play():$.value.pause():"ArrowDown"==t.code?(t.target.value=P.words[e],t.target.style.color="darkgoldenrod"):"AltLeft"==t.code&&(console.log($.value.currentTime),$.value.currentTime-=3))}))}c.getElementById("@0").focus(),$.value.play()}),200)};return(e,t)=>(r(),a("div",null,[o("div",p,[o("div",h,[m,w,v,x,s(o("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(_).text=e),class:"dark:bg-black inline-block outline-back dark:outline-white mt-3 w-full h-5"},null,512),[[d,i(_).text]])]),o("button",{onClick:W,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Add audio"),o("button",{onClick:R,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Check Answer"),o("button",{onClick:j,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Change theme"),o("button",{onClick:D,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Toggle Hint"),o("button",{onClick:t[2]||(t[2]=e=>i(H).showHelp=!i(H).showHelp),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded"},"Toggle Help"),s(o("div",y,[k,f,C,L,E,I,M],512),[[u,i(H).showHelp]]),o("audio",{ref:$,src:i(B).src,controls:"",class:"inline my-5 w-full dark:bg-blue-200"},null,8,["src"]),o("button",{onClick:z,class:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2"},"Start!"),o("input",{type:"file",id:"audio-input",class:"hidden",accept:"audio/*",onChange:A},null,32),o("div",S,[o("div",{innerHTML:i(q).text,class:"break-normal"},null,8,["innerHTML"])]),T])]))},__scopeId:"data-v-a9e08412"};const H=b({expose:[],setup:e=>(e,t)=>(r(),a($))});H.config.globalProperties.window=window,H.config.globalProperties.document=document,H.mount("#app");
