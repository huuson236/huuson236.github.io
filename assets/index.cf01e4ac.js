import{p as e,a as t,r as l,b as n,w as r,o as a,c as o,d as s,e as d,f as i,v as c,u,g,t as p,h,i as b,j as w,k as m}from"./vendor.f85587d2.js";e("data-v-1b43a0df");const y={class:"lg:w-1/2 md:w-2/3 sm:w-11/12 mx-auto z-10"},x={class:"pt-5 mb-5 dark:text-white"},k=d("b",null,"Paste transcript here:",-1),v=b(),f=d("br",null,null,-1),C=b(),E={class:"dark:text-white my-4"},L=d("b",null,"Help Menu",-1),F=d("br",null,null,-1),I=b(" Left Alt = back 4s"),A=d("br",null,null,-1),B=b(" Space = play/pause"),M=d("br",null,null,-1),T=b(" Down = show the current word answer"),H=d("br",null,null,-1),S=b(" Tab = Next word"),$=d("br",null,null,-1),D=b(" Shift Tab / Backspace = Back word"),j=d("br",null,null,-1),W=b(" F1/F2 = Decrease/Increase audio speed by 0.1"),P=d("br",null,null,-1),U=b(" F3 = Check Answer"),O=d("br",null,null,-1),R=b(" F4 = Toggle hint (show/hide the word length)"),_=d("br",null,null,-1),q={class:"dark:text-white text-sm my-2"},z={key:0,class:"dark:text-white mt-1 font-bold text-justify"},K={class:"dark:text-white"},N={class:"text-green-500 mx-10"},V={class:"text-red-500"},Z={class:"text-purple-500 mx-10"},G={class:"text-yellow-500"},J={class:"my-5 break-normal dark:text-white"},Q=d("br",null,null,-1);t();const X={expose:[],setup(e){const t=w(),b=t.appContext.config.globalProperties.document,m=t.appContext.config.globalProperties.window,X=l(null),Y=n({ratio:1,nWords:-1,hint:!1,useMaxLength:!0,showHelp:!1,showAnswer:!1}),ee=n({src:"",speed:1});r((()=>ee.speed),(e=>{X.value.playbackRate=e})),a((()=>{b.addEventListener("keydown",(e=>{"F1"==e.key?(e.preventDefault(),ee.speed-=.1):"F2"==e.key?(e.preventDefault(),ee.speed+=.1):"F3"==e.key?(e.preventDefault(),ie()):"F4"==e.key&&(e.preventDefault(),oe())}))}));const te=e=>{let t=e.target.files[0];const l=URL.createObjectURL(t);ee.src=l},le=()=>{b.getElementById("audio-input").click()},ne=n({words:{}}),re=e=>Math.random()<Y.ratio?`[${e}]`:e,ae=()=>{"dark"===localStorage.theme||!("theme"in localStorage)&&m.matchMedia("(prefers-color-scheme: dark)").matches?(b.documentElement.classList.add("dark"),localStorage.theme="light"):(b.documentElement.classList.remove("dark"),localStorage.theme="dark")},oe=()=>{Y.hint=!Y.hint;let e=b.querySelectorAll(".hint");for(let t=0;t<e.length;t++){let l=e[t];Y.hint?l.style.display="block":l.style.display="none"}},se=e=>Math.random()<Y.ratio&&"br"!=e?(Y.nWords++,ne.words[`@${Y.nWords}`]=e,`\n        <div class="inline-block dark:text-white font-mono">\n            <div class="border-b-2 mr-1 inline-block border-blue-500 text-lg">\n                <input\n                    ref="ref-${Y.nWords}"\n                    id="@${Y.nWords}"\n                    class="outline-none dark:bg-gray-900 bg-gray-200 text-center mt-2"\n                    style="width: ${10*(e.length+1)}px;"\n                    ${Y.useMaxLength?`maxlength="${e.length}"`:""}\n                />\n            </div>\n            <div class="hint text-center text-xs" style="display: none">(${e.length})</div>\n        </div>`):e,de=n({total:0,wrong:0,correct:0,empty:0,hint:0,show:!1}),ie=()=>{Y.showAnswer=!Y.showAnswer,Object.assign(de,{total:0,wrong:0,correct:0,empty:0,hint:0}),de.total=Object.keys(ne.words).length,de.show=!0;for(let e in ne.words){let t=b.getElementById(e),l=t.value;""!=l&&(l!=ne.words[e]?(t.style.color="red",de.wrong++):""==t.style.color?(t.style.color="limegreen",de.correct++):"darkgoldenrod"==t.style.color&&de.hint++),""!=l&&"violet"!=t.style.color||(t.style.color="violet",t.value=ne.words[e],de.empty++)}},ce=n({text:""}),ue=n({text:""}),ge=()=>{if(de.show=!1,ce.text=ce.text.trim(),""==ce.text)return;Y.nWords=-1,ne.words={};let e=ce.text.trim().replace(/(\.|;|:|,|”)(?!\s|”)/g,"$& "),t=e.replace(/(\r\n|\n|\r)/gm," <br/>").replace(/\b\w+(?:[\'-’]\w+)*\b/g,se),l=e.replace(/\b\w+(?:[\'-’]\w+)*\b/g,re);console.log(l),ue.text=t,setTimeout((()=>{for(let e in ne.words){let t="@"+Math.min(parseInt(e.substring(1))+1,Object.keys(ne.words).length-1),l="@"+Math.max(parseInt(e.substring(1))-1,0);b.getElementById(e).addEventListener("input",(t=>{if(!t.data)return;let l=t.target.value,n=t.target.selectionStart-1,r=ne.words[e].substring(n,n+1);r.match(/[A-Z]/i)&&r===r.toUpperCase()&&(t.target.value=l.substring(0,l.length-1)+t.data.toUpperCase()),t.target.value=t.target.value.trim()})),b.getElementById(e).addEventListener("keydown",(e=>{if("Backspace"==e.code)switch(e.target.value.length){case 0:b.getElementById(l).focus();break;case 1:e.target.style.color=""}})),b.getElementById(e).addEventListener("keyup",(l=>{l.preventDefault(),l.code.match(/^Key/)?l.target.value.length==ne.words[e].length&&b.getElementById(t).focus():" "==l.key&&""!=ee.src?X.value.paused?X.value.play():X.value.pause():"ArrowDown"==l.code?(l.target.value=ne.words[e],l.target.style.color="darkgoldenrod"):"AltLeft"==l.code&&(X.value.currentTime-=4)}))}b.getElementById("@0").focus(),X.value.canPlay&&X.value.play()}),200)};return(e,t)=>(o(),s("div",null,[d("div",y,[d("div",x,[k,v,f,C,i(d("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>u(ce).text=e),class:"dark:bg-black inline-block outline-back dark:outline-white mt-3 w-full h-5"},null,512),[[c,u(ce).text]])]),d("button",{onClick:le,class:"bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded mr-2 mb-1"},"Add audio"),d("button",{onClick:ae,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Change theme"),d("button",{onClick:oe,class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded mr-2"},"Toggle Hint"),d("button",{onClick:t[2]||(t[2]=e=>u(Y).showHelp=!u(Y).showHelp),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded"},"Toggle Help"),i(d("div",E,[L,F,I,A,B,M,T,H,S,$,D,j,W,P,U,O,R,_],512),[[g,u(Y).showHelp]]),d("audio",{ref:X,src:u(ee).src,controls:"",class:"inline w-full dark:bg-blue-200"},null,8,["src"]),d("div",q," Current speed: "+p(u(ee).speed.toFixed(1))+"x ",1),d("button",{onClick:ge,class:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2"},"Start!"),d("button",{onClick:ie,class:"bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded mr-2"},"Check Answer"),u(de).show?(o(),s("div",z,[d("span",K," Total: "+p(u(de).total),1),d("span",N," Correct: "+p(u(de).correct)+" ("+p((u(de).correct/u(de).total*100).toFixed(1))+"%) ",1),d("span",V," Wrong: "+p(u(de).wrong)+" ("+p((u(de).wrong/u(de).total*100).toFixed(1))+"%) ",1),d("span",Z," Empty: "+p(u(de).empty)+" ("+p((u(de).empty/u(de).total*100).toFixed(1))+"%) ",1),d("span",G," Use hint: "+p(u(de).hint)+" ("+p((u(de).hint/u(de).total*100).toFixed(1))+"%) ",1)])):h("",!0),d("input",{type:"file",id:"audio-input",class:"hidden",accept:"audio/*",onChange:te},null,32),d("div",J,[d("div",{innerHTML:u(ue).text,class:"break-normal"},null,8,["innerHTML"])]),Q])]))},__scopeId:"data-v-1b43a0df"};const Y=m({expose:[],setup:e=>(e,t)=>(o(),s(X))});Y.config.globalProperties.window=window,Y.config.globalProperties.document=document,Y.mount("#app");
